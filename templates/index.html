<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>EnfEvolue ‚Äì Evolu√ß√£o de Enfermagem</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

<header>
    <h1>EnfEvolue</h1>
    <p>Evolu√ß√£o T√©cnica de Enfermagem</p>
</header>

<main>

<!-- üîµ CADASTRO TEMPOR√ÅRIO -->
<div class="cadastro-box">
    <h2>üë©‚Äç‚öïÔ∏è Cadastrar Profissional Tempor√°ria</h2>

    <form method="POST">
        <input type="hidden" name="acao" value="cadastrar_profissional">

        <label>Nome</label>
        <input type="text" name="novo_nome">

        <label>COREN</label>
        <input type="text" name="novo_coren">

        <button type="submit">Cadastrar Profissional Tempor√°ria</button>

        {% if mensagem %}
            <p style="color:green; font-weight:bold; margin-top:10px;">
                {{ mensagem }}
            </p>
        {% endif %}
    </form>
</div>

<!-- üü¢ FORMUL√ÅRIO PRINCIPAL -->
<form method="POST">

    <input type="hidden" name="acao" value="gerar_evolucao">

    <h2>Dados da Evolu√ß√£o</h2>

     <label>Setor</label>
    <select name="setor" id="setor">
        <option value="">Selecione</option>
        <option value="Sala de medica√ß√£o">Sala de medica√ß√£o</option>
        <option value="Observa√ß√£o Pediatrica">Observa√ß√£o Pediatrica</option>
        <option value="Observa√ß√£o">Observa√ß√£o</option>
        <option value="Sala Vermelha">Sala Vermelha</option>
        <option value="outro">Outro</option>
    </select>

    <label>Hor√°rio da evolu√ß√£o</label>
    <input type="time" name="horario" required>

    <label>Paciente consciente e orientado?</label>
    <select name="consciente" required>
        <option value="">Selecione</option>
        <option value="1">Sim</option>
        <option value="2">N√£o</option>
    </select>

    <label>Paciente se queixa de algo?</label>
    <select name="queixa" id="queixa" required>
        <option value="">Selecione</option>
        <option value="1">Sim</option>
        <option value="2">N√£o</option>
    </select>

    <div id="campo_queixa" style="display:none;">
        <label>Descri√ß√£o da queixa</label>
        <input type="text" name="descricao_queixa">

        <label>Escala da dor (0‚Äì10)</label>
        <input type="number" name="dor" min="0" max="10">
    </div>

    <h2>Procedimentos</h2>

    <label>Pun√ß√£o venosa realizada?</label>
    <select name="puncao" id="puncao" required>
        <option value="">Selecione</option>
        <option value="1">Sim</option>
        <option value="2">N√£o</option>
    </select>

    <div id="campo_puncao" style="display:none;">

        <label>Numera√ß√£o do abocath</label>
        <select name="abocath" id="abocath">
            <option value="">Selecione</option>
            <option value="18">18</option>
            <option value="20">20</option>
            <option value="22">22</option>
            <option value="24">24</option>
            <option value="outro">Outro</option>
        </select>

        <input type="text" name="abocath_outro" id="abocath_outro"
               placeholder="Digite outro n√∫mero"
               style="display:none; margin-top:5px;">

    </div>

    <label>Medica√ß√£o administrada conforme prescri√ß√£o?</label>
    <select name="medicacao" required>
        <option value="">Selecione</option>
        <option value="1">Sim</option>
        <option value="2">N√£o</option>
    </select>

    <label>Desfecho do paciente</label>
    <select name="desfecho">
        <option value="">Selecione</option>
        <option value="1">Alta</option>
        <option value="2">Retorna avalia√ß√£o m√©dica</option>
        <option value="3">Paciente evadiu</option>
    </select>

    <h2>Profissional Respons√°vel</h2>

    <label>T√©cnica de Enfermagem</label>
    <select name="profissional" required>
        <option value="">Selecione</option>

        {% for nome in profissionais %}
            <option value="{{ nome }}">{{ nome }}</option>
        {% endfor %}

        <option value="outra">Outra profissional</option>
    </select>

    <label>Nome (se outra)</label>
    <input type="text" name="profissional_outro">

    <label>COREN (se outra)</label>
    <input type="text" name="coren">

    <label>Observa√ß√£o (opcional)</label>
    <input type="text" name="observacao" placeholder="Ex: Paciente se recusou √† medica√ß√£o">

    <button type="submit">Gerar Evolu√ß√£o</button>

</form>

{% if texto %}
<section class="resultado">
    <h2>Evolu√ß√£o Gerada</h2>
    <textarea readonly>{{ texto }}</textarea>
</section>
{% endif %}

</main>

<footer>
    <p>
        EnfEvolue ¬© 2026<br>
        Ferramenta de apoio √† evolu√ß√£o t√©cnica de enfermagem<br>
        N√£o substitui registros oficiais do prontu√°rio eletr√¥nico
    </p>
    <strong>Desenvolvido por B√°rbara Nunes Programmer</strong>
</footer>

<!-- ================= JAVASCRIPT ================= -->
<script>

// Mostrar campo da queixa
document.getElementById("queixa").addEventListener("change", function() {
    document.getElementById("campo_queixa").style.display =
        this.value === "1" ? "block" : "none";
});

// Mostrar campo pun√ß√£o
document.getElementById("puncao").addEventListener("change", function() {
    document.getElementById("campo_puncao").style.display =
        this.value === "1" ? "block" : "none";
});

// Mostrar campo outro abocath
document.getElementById("abocath").addEventListener("change", function() {
    document.getElementById("abocath_outro").style.display =
        this.value === "outro" ? "block" : "none";
});

</script>

</body>
</html>